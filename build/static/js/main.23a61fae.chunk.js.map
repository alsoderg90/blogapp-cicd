{"version":3,"sources":["services/blogs.js","components/Blog.js","services/login.js","components/Login.js","components/Notification.js","components/BlogForm.js","App.js","index.js"],"names":["token","getAll","axios","get","then","response","data","setToken","newToken","create","newObject","config","headers","Authorization","post","update","id","put","remove","delete","Blog","blog","setBlogs","users","blogs","voteBlog","newBlog","title","author","url","likes","blogService","updatedBlog","updatedBlogs","map","oldBlog","console","log","useState","allInfo","showAll","blogStyle","paddingTop","paddingLeft","border","borderWidth","marginBottom","handleShow","className","style","onClick","user","name","window","confirm","filter","savedblog","login","credentials","LoginForm","setUserName","setPassword","username","password","handleLogin","onSubmit","type","value","onChange","Notification","message","messageClass","BlogForm","setBlogsVisible","addBlog","setTitle","setAuthor","setUrl","event","preventDefault","target","App","setMessage","setMessageClass","setUser","blogsVisible","useEffect","loggedUserJSON","localStorage","getItem","JSON","parse","loginService","setItem","stringify","setTimeout","blogObject","concat","Login","hideWhenVisible","display","showWhenVisible","sortedList","sort","a","b","clear","key","blogForm","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.23a61fae.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = '/api/blogs'\n\nlet token = null\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst setToken = newToken => {\n  token = `bearer ${newToken}`\n}\n\nconst create = async newObject => {\n  const config = { headers: { Authorization: token } }\n  const response = await axios.post(baseUrl, newObject, config)\n  return response.data\n}\n\nconst update = async (id, newObject) => {\n  const config = { headers: { Authorization: token } }\n  const response = await axios.put(`${baseUrl}/${id}`, newObject,config)\n  return response.data\n}\n\nconst remove = id => {\n  const config = { headers: { Authorization: token } }\n  const response = axios.delete(`${baseUrl}/${id}`, config)\n  return response.data\n}\n\nexport default { getAll, setToken, create, update, remove }","/* eslint-disable no-unused-vars */\nimport React, { useState } from 'react'\nimport blogService from '../services/blogs'\n\nconst Blog = ({ blog, users, setBlogs,blogs }) => {\n\n  const voteBlog = async (blog) => {\n    const newBlog = {\n      title : blog.title,\n      author : blog.author,\n      url : blog.url,\n      likes : blog.likes +1,\n    }\n    const updatedBlog = await blogService.update(blog.id,newBlog)\n    const updatedBlogs = blogs.map(oldBlog => (oldBlog.id === updatedBlog.id) ? updatedBlog : oldBlog)\n    setBlogs(updatedBlogs)\n    console.log('update logi:', newBlog)\n  }\n\n  const RemoveBlog = () => {\n    return (\n      <button id='remove' onClick={() => {\n        if (window.confirm(`Remove blog ${blog.title} by ${blog.author} ?`))\n          blogService.remove(blog.id)\n        setBlogs(blogs.filter(savedblog => savedblog.id !== blog.id))\n      }}> Delete\n      </button>\n    )\n  }\n\n  const [allInfo, showAll] = useState(false)\n\n  const blogStyle = {\n    paddingTop: 5,\n    paddingLeft: 2,\n    border: 'solid',\n    borderWidth: 1,\n    marginBottom: 5\n  }\n\n  const handleShow = () => {\n    showAll(!allInfo)\n  }\n\n  const handleVote = () => {\n    voteBlog(blog)\n  }\n\n  if (allInfo === false)\n    return (\n      <li className='blog'>\n        <div style={blogStyle}><div>\n          {blog.title} by {blog.author}\n          <button id='view' onClick={handleShow}>View</button>\n        </div>\n        </div>\n      </li>\n    )\n\n  else {\n    return (\n      <li className='all'>\n        <div style={blogStyle}><div>\n          <p>{blog.title} <button onClick={handleShow}> Hide </button></p>\n          <p> {blog.author} </p>\n          {/*eslint-disable-next-line no-unused-vars */}\n          <p> Likes {blog.likes} <button id='like' onClick={handleVote}> Vote</button> </p>\n          <p> {blog.url}</p>\n          <p> {blog.user.name}</p>\n          {RemoveBlog()}\n        </div>\n        </div>\n      </li>\n    )\n  }\n}\n\nexport default Blog\n","import axios from 'axios'\nconst baseUrl = '/api/login'\n\n\n\nconst login = async credentials => {\n  const response = await axios.post(baseUrl, credentials)\n  console.log(response)\n  return response.data\n\n}\n\nexport default { login }","import React from 'react'\nimport PropTypes from 'prop-types'\n\nconst LoginForm = ({\n  setUserName,\n  setPassword,\n  username,\n  password,\n  handleLogin\n}) => {\n  return (\n    <div>\n      <form onSubmit={handleLogin}>\n        <h2>Log in to application</h2>\n        <div> Username\n          <input\n            id='username'\n            type =\"username\"\n            value={username}\n            name='Username'\n            onChange = {setUserName}\n          />\n        </div>\n        <div> Password\n          <input\n            id='password'\n            type = \"password\"\n            value = {password}\n            name = \"password\"\n            onChange = {setPassword}\n          />\n        </div>\n        <button id='login-button' type=\"submit\">Login</button>\n      </form>\n    </div>\n  )\n}\n\nLoginForm.propTypes = {\n  handleLogin: PropTypes.func.isRequired,\n  setUsername: PropTypes.func.isRequired,\n  setPassword: PropTypes.func.isRequired,\n  username: PropTypes.string.isRequired,\n  password: PropTypes.string.isRequired\n}\n\nexport default LoginForm","import React from 'react'\n\nconst Notification = ({ message, messageClass }) => {\n  if (message !== null) {\n    if (messageClass === 'error') {\n      return (\n        <div className='error'>{message}</div>\n      )\n    }\n    else {\n      return (\n        <div className='gg'>{message}</div>\n      )\n    }\n  }\n  else return null\n}\n\nexport default Notification","import React, { useState } from 'react'\n\nconst BlogForm = ({ setBlogsVisible,addBlog }) => {\n\n  const [title, setTitle] = useState('')\n  const [author, setAuthor] = useState('')\n  const [url, setUrl] = useState('')\n\n  const newBlog = (event) => {\n    event.preventDefault()\n    const newBlog = { title: title, author: author, url: url }\n    addBlog(newBlog)\n    setUrl('')\n    setTitle('')\n    setAuthor('')\n  }\n\n  return (\n    <div>\n      <h2>Create new</h2>\n      <form onSubmit={newBlog}>\n        <div> Title: <input id='title' type=\"text\" value={title} name=\"title\" onChange={({ target }) => {setTitle(target.value)}}/></div>\n        <div> Author: <input id='author' type=\"text\" value={author} name=\"author\" onChange={({ target }) => {setAuthor(target.value)}}/></div>\n        <div> Url: <input id='url' type=\"text\" value={url} name=\"url\" onChange={({ target }) => {setUrl(target.value)}}/></div>\n        <button id='create' type=\"submit\">Create</button>\n      </form>\n      <button onClick={() => setBlogsVisible(false)}> Cancel </button>\n    </div>\n  )\n}\n\nexport default BlogForm","import React, { useState, useEffect } from 'react'\r\nimport Blog from './components/Blog'\r\nimport blogService from './services/blogs'\r\nimport loginService from './services/login'\r\nimport LoginForm from './components/Login'\r\nimport Notification from './components/Notification'\r\nimport BlogForm from './components/BlogForm'\r\n\r\nconst App = () => {\r\n//const [blog, newBlog] = useState({title:'', author:'', url:''})\r\n  const [password, setPassword] = useState('')\r\n  const [username, setUserName] = useState('')\r\n  const [blogs, setBlogs] = useState([])\r\n  const [message, setMessage] = useState(null)\r\n  const [messageClass, setMessageClass] = useState(null)\r\n  const [user, setUser] = useState(null)\r\n  const [blogsVisible, setBlogsVisible] = useState(false)\r\n\r\n  useEffect(() => {\r\n    blogService.getAll().then(blogs =>\r\n      setBlogs( blogs )\r\n    )\r\n  },[user])\r\n\r\n  useEffect (() => {\r\n    const loggedUserJSON = window.localStorage.getItem('loggedUser')\r\n    if (loggedUserJSON) {\r\n      const user = JSON.parse(loggedUserJSON)\r\n      setUser(user)\r\n      blogService.setToken(user.token)\r\n    }\r\n  },[])\r\n\r\n\r\n  const handleLogin = async (event) => {\r\n    event.preventDefault()\r\n\r\n    try {\r\n      const user = await loginService.login({ username, password })\r\n\r\n      blogService.setToken(user.token)\r\n      setUser(user)\r\n      setUserName('')\r\n      setPassword('')\r\n      window.localStorage.setItem('loggedUser', JSON.stringify(user))\r\n    }\r\n    catch (exception) {\r\n\t  console.log(exception)\r\n      setMessage('wrong credentials')\r\n      setMessageClass('error')\r\n      setTimeout(() => {\r\n        setMessageClass(null)\r\n        setMessage(null)\r\n      }, 2500)\r\n      setUserName('')\r\n      setPassword('')\r\n    }\r\n  }\r\n\r\n  const addBlog= (blogObject) => {\r\n    blogService.create(blogObject).then(blog => {\r\n      setBlogs(blogs.concat(blog))\r\n      setBlogsVisible(false)\r\n      setMessage(`A new blog: ${blog.title} by ${blog.author} added`)\r\n      setMessageClass('gg')\r\n      setTimeout(() => {\r\n        setMessageClass(null)\r\n        setMessage(null)\r\n      }, 2500)\r\n    })\r\n  }\r\n\r\n\r\n  const blogForm = () => {\r\n    const hideWhenVisible = { display: blogsVisible ? 'none' : '' }\r\n    const showWhenVisible = { display: blogsVisible ? '' : 'none' }\r\n\r\n    const sortedList = blogs.sort((a,b) => (a.likes < b.likes) ? 1 : -1)\r\n\r\n    return (\r\n      <div>\r\n        <h2>Blogs</h2>\r\n        <p>\r\n          {user.name} logged in <button onClick = {() => {\r\n            window.localStorage.clear()\r\n            setUser(null)}}> Log out </button>\r\n        </p>\r\n        {sortedList.map(blog => <Blog key={blog.id} blog={blog} users={user} setBlogs={() => setBlogs} blogs={blogs}/>) }\r\n        <div style={hideWhenVisible}> <button onClick={() => setBlogsVisible(true)}> Create </button>\r\n        </div>\r\n        <div style={showWhenVisible}>\r\n          <BlogForm\r\n            addBlog={addBlog}\r\n            setBlogsVisible={setBlogsVisible}\r\n            user={user}/>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n\r\n    <div>\r\n      <Notification message={message} messageClass={messageClass} />\r\n      {user === null ? <LoginForm username={username}\r\n        password={password} setPassword={({ target }) =>\r\n        {setPassword(target.value)}} setUserName={({ target }) =>\r\n        {setUserName(target.value)}} handleLogin={(event) =>\r\n        {handleLogin(event)}} /> :\r\n        blogForm()}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport './App.css'\n\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}